{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"One Suite Documentation","text":"<p>Welcome to the One Suite Documentation, your go-to resource for understanding and using OneLead and OneInbox\u2014two open-source applications built on the Frappe framework.</p> <p>One Suite is an extendable solution designed to integrate lead management and customer communication workflows. It enables businesses to automate lead collection, streamline messaging, and centralize customer interactions.</p>"},{"location":"#overview-of-one-suite","title":"Overview of One Suite","text":"<p>One Suite provides a Frappe-based centralized system for managing leads and communications. It integrates with Meta (Facebook), Google, Instagram, WhatsApp, and Messenger to ensure seamless data flow and automation.</p> <p>GitHub Repository: One Suite on GitHub</p>"},{"location":"#products-in-one-suite","title":"Products in One Suite","text":""},{"location":"#onelead-open-source-lead-capture-integration","title":"OneLead \u2013 Open-Source Lead Capture &amp; Integration","text":"<p>OneLead is a Frappe-based lead automation application that integrates with:</p> <ul> <li>Meta (Facebook) Ads \u2013 Captures leads from Facebook and Instagram lead forms.</li> <li>Google Leads \u2013 Fetches leads from Google Ads Lead Form Extensions.</li> </ul> <p>Key Features:</p> <ul> <li>Open-source and customizable lead management system.</li> <li>Automated lead fetching from Meta and Google.</li> <li>Webhook-based integration for real-time updates.</li> <li>Lead assignment and tracking within the Frappe framework.</li> </ul> <p>Documentation: OneLead Documentation GitHub Repository: OneLead on GitHub</p>"},{"location":"#oneinbox-open-source-multi-channel-messaging-integration","title":"OneInbox \u2013 Open-Source Multi-Channel Messaging Integration","text":"<p>OneInbox is a Frappe-based communication management application that integrates with multiple messaging platforms:</p> <ul> <li>Messenger \u2013 Manage Facebook Messenger conversations within your system.</li> <li>Instagram \u2013 Receive and reply to Instagram direct messages.</li> <li>WhatsApp \u2013 Handle customer interactions via the WhatsApp Cloud API.</li> </ul> <p>Key Features:</p> <ul> <li>open-source Application built on Frappe.</li> <li>Centralized messaging inbox for handling multiple platforms.</li> <li>Integration with existing CRM workflows within Frappe.</li> </ul> <p>Documentation: OneInbox Documentation GitHub Repository: OneInbox on GitHub</p>"},{"location":"#why-use-one-suite","title":"Why Use One Suite?","text":"<ul> <li>Built on Frappe \u2013 Leverages a robust framework for extensibility and customization.</li> <li>Self-Hosted &amp; Open-Source \u2013 Deploy and modify it according to business needs.</li> <li>Seamless Integrations \u2013 Works with Meta Ads, Google Leads, WhatsApp, and more.</li> <li>Automated Workflows \u2013 Reduce manual effort with webhook-based processing.</li> <li>CRM-Friendly \u2013 Designed to work with Frappe-based CRM systems.</li> </ul> <p>For troubleshooting and setup assistance, visit the Troubleshooting Guide.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>If you're new to One Suite, follow the setup guides: OneLead Setup Guide OneInbox Setup Guide</p>"},{"location":"#future-enhancements","title":"Future Enhancements","text":"<p>Upcoming improvements include:</p> <ul> <li>Lead scoring and enrichment features in OneLead.</li> <li>AI-driven chat automation for OneInbox.</li> <li>Advanced analytics and reporting capabilities.</li> </ul> <p>Stay updated in the Upcoming Features section.</p>"},{"location":"#contribute-to-one-suite","title":"Contribute to One Suite","text":"<p>One Suite is an open-source project, and community contributions are encouraged.</p> <ul> <li>Report issues or suggest features on GitHub.</li> <li>Submit pull requests to enhance functionality.</li> <li>Participate in discussions and help improve documentation.</li> </ul> <p>Contribution Guide</p> <p>Explore the documentation for OneLead and OneInbox to get started.</p>"},{"location":"onelead/","title":"OneLead - Lead Management Solution","text":"<p>OneLead is a Frappe-based lead management system designed to seamlessly integrate with multiple lead sources, including Meta (Facebook) Leads and Google Leads. It automates lead collection, processing, and assignment within your business workflow.</p>"},{"location":"onelead/#lead-sources","title":"Lead Sources","text":""},{"location":"onelead/#meta-leads","title":"\ud83d\udd39 Meta Leads","text":"<p>OneLead integrates with Meta (Facebook) Lead Ads, allowing businesses to automatically capture leads from Facebook and Instagram ad campaigns, map them to internal CRM systems, and assign them to sales teams.</p>"},{"location":"onelead/#google-leads","title":"\ud83d\udd39 Google Leads","text":"<p>With OneLead's Google Lead Integration, you can fetch leads directly from Google Ads Lead Form Extensions, ensuring that every inquiry is instantly available in your CRM for follow-up.</p>"},{"location":"onelead/#features","title":"Features","text":"<ul> <li>\ud83d\udd04 Automated lead fetching from Meta &amp; Google.</li> <li>\ud83d\udccc Custom mapping to internal lead structures.</li> <li>\ud83d\udcca Lead tracking &amp; assignment based on business rules.</li> <li>\ud83d\udd17 Webhook-based integration for real-time updates.</li> </ul>"},{"location":"onelead/#sneak-peek","title":"Sneak Peek \ud83d\udc40","text":"<p>Here\u2019s a quick look at the OneLead Dashboard \u2014 your central hub for managing and tracking leads from all sources.</p> <p>OneLead Dashboard Preview</p> <p></p> <p>Proceed to Meta Integration for detailed setup instructions.</p>"},{"location":"onelead/custom_scripts/","title":"Custom Scripts &amp; Formatting Functions in OneLead","text":"<p>OneLead supports custom scripts to process and format lead data before saving it into the CRM. These functions help with data validation, transformation, and automation.</p> <p>This guide covers: - Built-in functions available in OneLead - How to use formatting functions in Lead Mapping - Creating custom functions - Best practices for customization</p>"},{"location":"onelead/custom_scripts/#built-in-formatting-functions","title":"Built-in Formatting Functions","text":"<p>The following functions are available and can be applied during Lead Mapping.</p> Function Name Description format_phone_number Formats a phone number into <code>+country_code-local_number</code> format and ensures validity. takes param value default_region if not passed it's \"IN\" calculate_age Calculates age based on date of birth. extract_country_from_address Extracts the country name from an address string. add_prefix Adds a prefix to a value if not empty. capitalize_name Capitalizes the first letter of each word in a name. current_date Returns the current date."},{"location":"onelead/custom_scripts/#using-formatting-functions-in-lead-mapping","title":"Using Formatting Functions in Lead Mapping","text":"<p>To apply a formatting function: 1. Go to \"Meta Ads Page Config\" &gt; \"Quick Map Lead Fields\". 2. Select the desired function in the Formatting Function column. 3. The function will automatically transform the lead data before saving.</p>"},{"location":"onelead/custom_scripts/#creating-custom-formatting-functions","title":"Creating Custom Formatting Functions","text":"<p>You can create custom functions and register them for use in OneLead.</p>"},{"location":"onelead/custom_scripts/#steps-to-add-a-new-function","title":"Steps to Add a New Function","text":"<ol> <li>Define a Python function.</li> <li>Use the <code>@register_function(\"function_name\")</code> decorator.</li> <li>The function becomes available in OneLead\u2019s Formatting Function dropdown.</li> </ol> <p>Example: Convert Text to Uppercase</p> <pre><code>@register_function(\"convert_to_uppercase\")\ndef convert_to_uppercase(value):\n    return value.upper() if value else value\n</code></pre>"},{"location":"onelead/custom_scripts/#best-practices","title":"Best Practices","text":"<p>\u2714\ufe0f Keep function logic simple and efficient. \u2714\ufe0f Handle edge cases (e.g., missing values, incorrect formats). \u2714\ufe0f Use error handling (<code>try-except</code>) to prevent failures. \u2714\ufe0f Test functions before applying them to live data.  </p>"},{"location":"onelead/custom_scripts/#future-enhancements-upcoming-low-priority","title":"Future Enhancements (Upcoming: low priority)","text":"<ul> <li>Dynamic Function Parameters: Define parameters via UI.</li> <li>Function Chaining: Apply multiple functions sequentially.</li> <li>Additional Built-in Helpers: Date formatting, currency conversion, etc.</li> <li>Contributions are always welcome.</li> </ul>"},{"location":"onelead/custom_scripts/#next-steps","title":"Next Steps","text":"<ul> <li>Meta Form Mapping</li> <li>Meta Webhook Lead Logs</li> </ul>"},{"location":"onelead/installation/","title":"Installing OneLead","text":"<p>OneLead is an open-source Frappe application designed for lead management, integrating with Meta (Facebook) Ads and Google Leads. This guide provides step-by-step instructions for installing and setting up OneLead on a Frappe-based system.</p>"},{"location":"onelead/installation/#1-prerequisites","title":"1. Prerequisites","text":"<p>Before installing OneLead, ensure the following requirements are met:</p>"},{"location":"onelead/installation/#system-requirements","title":"System Requirements","text":"<ul> <li>Frappe Framework (v15)</li> <li>Bench CLI installed</li> </ul>"},{"location":"onelead/installation/#meta-accounts","title":"Meta Accounts","text":"<ul> <li>Facebook Developer Account (Sign Up)</li> </ul>"},{"location":"onelead/installation/#2-installation-steps","title":"2. Installation Steps","text":""},{"location":"onelead/installation/#step-1-set-up-a-frappe-site","title":"Step 1: Set Up a Frappe Site","text":"<p>If you do not already have a running Frappe instance, install Frappe and create a new site:</p> <pre><code>\n# Create a new Bench directory\nbench init --frappe-branch version-15 one-bench\ncd one-bench\n\n# Create a new Frappe site\nbench get-app https://github.com/redsoftware-hq/onelead\n\nbench --site mysite.local install-app onelead\n</code></pre>"},{"location":"onelead/meta/","title":"Meta Integration for OneLead","text":"<p>OneLead provides seamless integration with Meta (Facebook) Lead Ads, ensuring that leads from your Facebook and Instagram campaigns are instantly available in your CRM.</p>"},{"location":"onelead/meta/#how-it-works","title":"How It Works","text":"<ul> <li>Captures leads from Facebook Lead Forms via webhooks.</li> <li>Maps leads to internal CRM structures based on configurations.</li> <li>Assigns leads to users or teams automatically.</li> <li>Tracks lead performance through analytics.</li> </ul>"},{"location":"onelead/meta/#key-setup-steps","title":"Key Setup Steps","text":"<ol> <li>Register a Meta App on the Facebook Developer Portal.</li> <li>Configure Webhooks to receive real-time lead data.</li> <li>Generate and validate User Access Tokens.</li> <li>Map Meta Ad Pages and Forms inside OneLead.</li> </ol> <p>For a complete guide on Meta Webhook Configuration, go to Meta Webhook Config.</p> <p>Note If you're using the Meta integration for your own business (one business account), you do not need to submit your app for Meta App Review. Just make sure the person setting it up: - Is the Page Owner or has Ads Management access, and - Has the appropriate role (Admin/Developer) on the Meta App.</p> <p>However, if you intend to make this integration available for multiple businesses or third-party use, Meta AppReview is required. \u26a0\ufe0f As of now, OneLead\u2019s current codebase does not support multi-business integration, so external use isn't supported yet.</p>"},{"location":"onelead/meta/#next-steps","title":"Next Steps","text":"<ul> <li>Meta App Setup</li> <li>Meta Form Mapping</li> <li>Meta Webhook Lead Logs</li> <li>Meta Lead Testing</li> </ul>"},{"location":"onelead/meta/meta_form_mapping/","title":"Meta Form Fetching &amp; Mapping in OneLead","text":"<p>Once your Meta Ads Page Config is set up and leads are being received in Meta Webhook Lead Logs, the next step is fetching and mapping lead forms. This ensures that incoming lead data is correctly assigned to your CRM lead doctype fields.</p>"},{"location":"onelead/meta/meta_form_mapping/#page-configuration","title":"Page Configuration","text":"<p>To find the pages associated with your Meta Ad Account: - Navigate to OneLead &gt; Meta Ads Page Config. - This will display a list of page names linked to your user_adaccounts. - Alternatively, check OneLead &gt; Meta Page to see the full list of fetched pages.</p> <p>Meta Ads Page Config:</p> <p>Meta Ads Page Config</p> <p></p>"},{"location":"onelead/meta/meta_form_mapping/#verify-lead-doctype-reference","title":"Verify Lead Doctype Reference","text":"<ul> <li>In Meta Ads Page Config, ensure that \"Lead Doctype Reference\" is set.</li> <li>This acts as a global setting to assign all lead forms under this page to a specific Lead Doctype.</li> <li>You can override this per individual form later.</li> </ul> <p>Ensure that your page is enabled to allow lead entries. If disabled, it will appear as disabled in Meta Webhook Lead Logs.</p>"},{"location":"onelead/meta/meta_form_mapping/#mapping-meta-lead-forms","title":"Mapping Meta Lead Forms","text":"<ol> <li>Open the Page Configuration (Meta Ads Page Config).</li> <li>Under the mapping child table, add a new row and select a Meta Lead Form from the Forms List.</li> <li>Click the Quick Map button (Note: Due to a Frappe table issue, the button will not appear until you select a row).</li> <li>This will open the Quick Map Lead Fields pop-up.</li> </ol> <p>Forms List &amp; Quick Map Button:</p> <p>Quick Map</p> <p></p>"},{"location":"onelead/meta/meta_form_mapping/#quick-map-lead-fields","title":"Quick Map Lead Fields","text":"<p>In the Quick Map Lead Fields pop-up, you will see:</p> Column Description Meta Field Fields available in the Meta Lead Form. Lead Doctype Field Fields from the selected Lead Doctype Reference. Default Value Hardcoded values for this field, applied to all leads under this form. Formatting Function Helper function to modify/sanitize the field value before saving. Function Parameters If a function requires additional parameters, pass them as a JSON object."},{"location":"onelead/meta/meta_form_mapping/#understanding-field-mapping-logic","title":"Understanding Field Mapping Logic","text":"<ul> <li> <p>Meta Field \u2192 Lead Doctype Field Mapping</p> <ul> <li>Assign Meta form fields to corresponding CRM fields.</li> <li>Ensure mandatory fields in the Lead Doctype are mapped correctly.</li> </ul> </li> <li> <p>Default Value</p> <ul> <li> <p>If a field is missing in Meta Lead Form, you can hardcode a value.</p> </li> <li> <p>Field Lookup Order (Dynamic Values)     If a default value field is mapped using <code>field:field_name</code>, OneLead searches for the field_name value in this order:</p> <ol> <li>Meta Webhook Lead Logs</li> <li>Meta Lead Form</li> <li> <p>Meta Ads Page Config</p> </li> <li> <p>If no value is found, an error is raised in Meta Webhook Lead Logs.</p> </li> </ol> </li> </ul> </li> <li> <p>Formatting Function</p> <ul> <li>Choose a function to modify data before storing (e.g., phone number formatting).</li> <li>Custom functions can be added via Server Scripts and handled in Lead doctype event (<code>validate</code> or <code>before_save</code>).</li> </ul> </li> <li> <p>Function Parameters</p> <ul> <li>column available in form view.</li> <li>If a custom function requires parameters, pass them as a JSON object.</li> </ul> </li> </ul>"},{"location":"onelead/meta/meta_form_mapping/#saving-populating-forms","title":"Saving &amp; Populating Forms","text":"<ul> <li>Once all fields are mapped, click Save Mappings.</li> <li>Save the Meta Ads Page Config.</li> </ul>"},{"location":"onelead/meta/meta_form_mapping/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>If a form is missing in Meta Lead Form, click Populate Forms to fetch all latest forms for that page.</li> </ul>"},{"location":"onelead/meta/meta_form_mapping/#next-steps","title":"Next Steps","text":"<ul> <li>Meta Webhook Lead Logs</li> <li>Meta Lead Testing</li> </ul> <p>This completes the Meta Form Fetching &amp; Mapping setup for OneLead.</p>"},{"location":"onelead/meta/meta_lead_testing/","title":"Testing Meta Lead Integration in OneLead","text":"<p>After setting up the Meta App and configuring Meta Webhook Config in OneLead, you should test whether your integration is working correctly. This guide covers how to verify webhook connectivity, send a test lead, and troubleshoot common issues.</p>"},{"location":"onelead/meta/meta_lead_testing/#verify-webhook-configuration","title":"Verify Webhook Configuration","text":"<p>Before testing with a real lead, confirm that the Meta Webhook Config is properly set up.</p>"},{"location":"onelead/meta/meta_lead_testing/#sending-a-test-lead-using-metas-testing-tool","title":"Sending a Test Lead Using Meta's Testing Tool","text":""},{"location":"onelead/meta/meta_lead_testing/#step-1-open-facebook-lead-ads-testing-tool","title":"Step 1: Open Facebook Lead Ads Testing Tool","text":"<ol> <li>Go to the Facebook Lead Ads Testing Tool.</li> <li>Select your Facebook Page (the same one linked to your Meta Ads).</li> <li>Choose the Lead Form that you want to test.</li> <li>Click Create Lead.</li> </ol>"},{"location":"onelead/meta/meta_lead_testing/#step-2-check-onelead-for-incoming-leads","title":"Step 2: Check OneLead for Incoming Leads","text":"<ul> <li>Go to OneLead &gt; Meta Webhook Lead Logs.</li> <li>Check if the lead log was received successfully.</li> <li>If leads are not appearing, check Frappe Logs or Error Logs for any errors.</li> </ul>"},{"location":"onelead/meta/meta_lead_testing/#testing-with-curl-manually-sending-a-lead","title":"Testing with Curl (Manually Sending a Lead)","text":"<p>If you are running OneLead locally and want to manually send a test lead without using Facebook's Lead Ads Tool, use the following cURL command to simulate a webhook event.</p> <pre><code>curl -X POST http://{base_url}/api/method/onelead.utils.meta_lead.webhook \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"entry\": [{\n    \"id\": \"1635959026695683\",\n    \"time\": 1735291694,\n    \"changes\": [{\n      \"value\": {\n        \"adgroup_id\": \"120212669930254\",\n        \"ad_id\": \"120212669955550254\",\n        \"created_time\": 1735291689,\n        \"leadgen_id\": \"56740452634061\",\n        \"page_id\": \"1635959142565683\",\n        \"form_id\": \"527829666666421\",\n        \"field_data\": [\n          { \"name\": \"full_name\", \"values\": [\"Test User\"] },\n          { \"name\": \"email\", \"values\": [\"test@example.com\"] },\n          { \"name\": \"phone_number\", \"values\": [\"+1234567890\"] }\n        ]\n      },\n      \"field\": \"leadgen\"\n    }]\n  }],\n  \"object\": \"page\"\n}'\n</code></pre>"},{"location":"onelead/meta/meta_lead_testing/#what-this-command-does","title":"What This Command Does","text":"<ul> <li>Sends a test lead to your Meta Webhook Lead Logs.</li> <li>if the page_id and form_id match in the Meta Ads Page Config, and form fields are mapped correctly, the lead will be captured automatically.</li> </ul>"},{"location":"onelead/meta/meta_lead_testing/#debugging-issues","title":"Debugging Issues","text":""},{"location":"onelead/meta/meta_lead_testing/#1-webhook-not-triggering","title":"1. Webhook Not Triggering?","text":"<ul> <li>Check if the Webhook URL is correctly set in the Meta App.</li> <li>Ensure the Webhook Verify Token matches what\u2019s in Meta Webhook Config.</li> <li>check Error Logs in Frappe for any issues.</li> </ul>"},{"location":"onelead/meta/meta_lead_testing/#2-lead-not-showing-in-your-lead-doctype","title":"2. Lead Not Showing in your Lead doctype?","text":"<ul> <li>Confirm that the Meta Ads Page Config of a Page is mapped correctly to a Lead Form in question.</li> <li>check Meta Lead Form doctype to check the form is fetched.</li> <li>Click \"Populate Forms\" in Meta Ads Page Config to refresh the list of active forms.</li> <li>Ensure that Page Flow is enabled in Meta Webhook Config.</li> </ul>"},{"location":"onelead/meta/meta_lead_testing/#next-steps","title":"Next Steps","text":"<ul> <li>Troubleshooting</li> <li>Custom Scripts &amp; Hooks</li> </ul> <p>For further assistance, check the GitHub Issues.</p>"},{"location":"onelead/meta/meta_webhook_lead_logs/","title":"Meta Webhook Lead Logs","text":""},{"location":"onelead/meta/meta_webhook_lead_logs/#meta-webhook-lead-logs-in-onelead","title":"Meta Webhook Lead Logs in OneLead","text":"<p>The Meta Webhook Lead Logs serve as the central logging system for all incoming leads from Meta (Facebook &amp; Instagram). This ensures that no lead is lost, even if the system is not configured at the time of lead reception.</p> <p>This section covers:</p> <ul> <li>Field explanations</li> <li>Processing statuses</li> <li>Error handling</li> <li>Lead reprocessing</li> <li>Lead sources (Webhook, Import, Polling - Upcoming)</li> <li>Organic leads</li> <li>System robustness and lead loss prevention</li> </ul> <p>Meta Webhook Lead Leads</p> <p></p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#lead-log-fields-and-their-roles","title":"Lead Log Fields and Their Roles","text":"<p>Each lead log entry contains multiple fields that provide details about the lead and its processing status.</p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#lead-metadata-received-from-meta","title":"Lead Metadata (Received from Meta)","text":"Field Description Leadgen ID Unique ID assigned by Meta to identify the lead. Page ID The Meta Page from which the lead was generated. Ad ID The Ad associated with the lead (if available). Form ID The Meta Lead Form ID used for lead collection. Created Time The time when the lead was created on Meta\u2019s platform. Received Time The time when OneLead received the lead from Meta."},{"location":"onelead/meta/meta_webhook_lead_logs/#processing-configuration","title":"Processing &amp; Configuration","text":"Field Description Source How the lead was received (<code>Webhook</code>, <code>Import</code>, <code>Polling - Upcoming</code>). Platform The platform where the lead was generated (Facebook, Instagram). Processing Status The status of the lead (<code>Pending</code>, <code>Processed</code>, <code>Error</code>, etc.). Config Reference Links the lead to the Meta Ads Page Config used for processing. Lead Form The name of the lead form used in Meta. Lead Doc Reference The mapped Lead Doctype in Frappe (if configured)."},{"location":"onelead/meta/meta_webhook_lead_logs/#error-handling-data","title":"Error Handling &amp; Data","text":"Field Description Error Message Describes any error that occurred during processing. Raw Payload Stores the raw JSON data received from Meta in Webhook. Lead Payload Stores lead data fetched from Meta based on <code>Leadgen ID</code>. <p>Example: Lead Log Detail</p> <p></p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#processing-statuses","title":"Processing Statuses","text":"<p>Each lead in the Meta Webhook Lead Logs can have one of the following statuses:</p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#pending","title":"Pending","text":"<ul> <li>The lead has been received but has not yet been processed.</li> <li>This happens when a webhook is received, and the system has not yet executed the mapping and entry creation.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#unconfigured","title":"Unconfigured","text":"<ul> <li>The system could not find the \"Meta Ads Page Config\" for the Page ID in the webhook.</li> <li>OR, the Page ID was found but the Form ID was not listed under the mapping child table.</li> <li>Solution: Ensure that the page is configured, and the lead form is mapped.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#disabled","title":"Disabled","text":"<ul> <li>The system found the Meta Ads Page Config, but it is not enabled.</li> <li>Leads from this page will not be processed unless enabled.</li> <li>Solution: Go to Meta Ads Page Config and enable the configuration.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#processed","title":"Processed","text":"<ul> <li>All requirements were met (configuration exists, mapping is correct).</li> <li>The lead was successfully mapped and entered into the Lead Doctype.</li> <li>The lead is now available for CRM use.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#error","title":"Error","text":"<ul> <li>An unexpected issue occurred, preventing lead entry.</li> <li>Common Error Scenarios:<ul> <li>Invalid Contact Number: The phone number does not follow the required format.</li> <li>Invalid Data Format: For example, names containing special characters like <code>&lt; &gt;</code>.</li> <li>Missing Mandatory Fields: The lead form may not contain all required fields.</li> <li>Unexpected Meta Response: Sometimes, Meta sends partial or incorrect data sent from user.</li> </ul> </li> <li>Solution:</li> <li>Use validation hooks or formatting functions to fix data issues.</li> <li>Manually correct data and mark as processed lead.</li> <li>Mark unrecoverable leads as Loss. (TODO)</li> </ul> <p>Example: Error Leads</p> <p></p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#loss-new-status-todo","title":"Loss (New Status) (TODO)","text":"<ul> <li>Some leads cannot be recovered, but they do not qualify as an \"Error\".</li> <li>These leads will have incorrect/incomplete data that cannot be fixed by system logic.</li> <li>Example: Invalid or missing contact details.</li> <li>Action: Manually mark them as \"Loss\", so they don\u2019t appear as errors.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#reprocessing-leads","title":"Reprocessing Leads","text":"<p>If a lead is not in a Pending or Processed state, it can be reprocessed.</p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#how-to-reprocess-leads","title":"How to Reprocess Leads?","text":""},{"location":"onelead/meta/meta_webhook_lead_logs/#process-lead-again-individual","title":"Process Lead Again (Individual)","text":"<ul> <li>Open a lead log entry.</li> <li>Click \"Process Lead Again\".</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#bulk-reprocess","title":"Bulk Reprocess","text":"<ul> <li>Select multiple lead logs in List View.</li> <li>Click \"Process Leads\" (Runs as a background job).</li> </ul> <p>Process Leads</p> <p></p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#lead-sources","title":"Lead Sources","text":"<p>There are three ways a lead can be received in OneLead:</p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#webhook-real-time","title":"Webhook (Real-Time)","text":"<ul> <li>The most common and recommended method, can not be turned off.</li> <li>Leads are pushed from Meta when a user submits a form.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#import-manual","title":"Import (Manual)","text":"<ul> <li>Leads can be imported via the Import Tool, requiring only six key details:</li> <li>Leadgen ID</li> <li>Page ID</li> <li>Ad ID</li> <li>Form ID</li> <li>Created Time</li> <li>Received Time</li> <li>Helpful for historical data processing or bulk lead uploads.</li> <li>In cases where your system was down or for some issue you it could not receive hooks you can import manually.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#polling-upcoming-feature","title":"Polling (Upcoming Feature)","text":"<ul> <li>Will allow fetching leads on Interval from Meta.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#organic-leads","title":"Organic Leads","text":"<ul> <li>Leads that do not originate from an ad will have:</li> <li>No Ad ID</li> <li>A platform value (Facebook or Instagram)</li> <li>These are non-paid leads, often from organic post interactions.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#system-robustness-and-lead-loss-prevention","title":"System Robustness and Lead Loss Prevention","text":"<p>OneLead is designed to capture every lead received from Meta, regardless of: - Whether the page is configured or not. - Whether the page has been fetched or not. - Whether the user token is valid or expired.</p> <p>Meta Webhook Lead Logs will store everything received. Leads can be processed later after configuration is updated. No leads are lost, unless the system is completely down when Meta sends the webhook. </p> <p>Lead Loss Scenario</p> <p>The only case where a lead is lost is if OneLead is completely unreachable when Meta sends the webhook.</p>"},{"location":"onelead/meta/meta_webhook_lead_logs/#best-practices-for-error-handling","title":"Best Practices for Error Handling","text":"<ul> <li>Validate lead data before submission.</li> <li>Use helper functions to format and clean data before processing.</li> <li>Regularly check the error logs and take corrective action.</li> <li>Manually review and correct invalid leads to ensure no opportunities are lost.</li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#next-steps","title":"Next Steps","text":"<ul> <li>Meta Lead Testing </li> <li>Troubleshooting </li> </ul>"},{"location":"onelead/meta/meta_webhook_lead_logs/#still-facing-issues","title":"Still Facing Issues?","text":"<p>Raise an issue on GitHub: OneLead Issues </p>"},{"location":"onelead/meta/setup/","title":"Setting Up a Meta App for OneLead","text":"<p>To integrate OneLead with Meta (Facebook) Lead Ads, you need to create a Meta App in the Facebook Developer Portal and configure webhooks to receive lead data in real time.</p> <p>This guide walks through registering a Meta App, configuring permissions, and setting up the Meta Webhook Config in OneLead.</p>"},{"location":"onelead/meta/setup/#create-a-meta-app","title":"Create a Meta App","text":""},{"location":"onelead/meta/setup/#go-to-the-developer-portal","title":"Go to the Developer Portal","text":"<ul> <li>Visit the Facebook Developer Portal.</li> <li>Click \"My Apps\" \u2192 \"Create App\".</li> </ul>"},{"location":"onelead/meta/setup/#select-business-app-type","title":"Select Business App Type","text":"<ul> <li>Choose Business as the app type.</li> <li>Click Next.</li> </ul>"},{"location":"onelead/meta/setup/#set-app-details","title":"Set App Details","text":"<ul> <li>Enter an App Name (e.g., <code>OneLead Integration</code>).</li> <li>Add a Contact Email.</li> <li>Select a Business Account (if applicable).</li> <li>Click Create App.</li> </ul> <p>Meta App Basic Settings: </p>"},{"location":"onelead/meta/setup/#configure-basic-settings","title":"Configure Basic Settings","text":""},{"location":"onelead/meta/setup/#add-products-to-your-app","title":"Add Products to Your App","text":"<ul> <li>Under the Dashboard, go to Add Products to Your App.</li> <li>Select Webhooks.</li> <li>Click Set Up.</li> </ul>"},{"location":"onelead/meta/setup/#get-your-app-credentials","title":"Get Your App Credentials","text":"<ul> <li>Navigate to Settings &gt; Basic.</li> <li>Copy the App ID and App Secret.</li> <li>Add a Privacy Policy URL (required for public apps).</li> <li>Click Save Changes.</li> </ul>"},{"location":"onelead/meta/setup/#configure-webhooks-in-meta","title":"Configure Webhooks in Meta","text":"<p>OneLead uses webhooks to receive lead data from Meta.</p>"},{"location":"onelead/meta/setup/#add-a-webhook-endpoint","title":"Add a Webhook Endpoint","text":"<ul> <li>Navigate to Webhooks in the Meta App Dashboard.</li> <li>Click Add Callback URL.</li> <li>Use the following webhook URL:</li> </ul> <pre><code>{your_frappe_url}/api/method/onelead.utils.meta_lead.webhook\n</code></pre> <ul> <li>Example: <code>https://yourdomain.com/api/method/onelead.utils.meta_lead.webhook</code></li> <li>Enter the Webhook Verify Token (set this in OneLead).</li> <li>Click Verify and Save.</li> </ul> <p>Adding Webhook URL in Meta App: </p>"},{"location":"onelead/meta/setup/#subscribe-to-webhook-events","title":"Subscribe to Webhook Events","text":"<ul> <li>Under Webhooks, click Subscribe to Events.</li> <li>Enable the leadgen event.</li> <li>Click Save Changes.</li> </ul> <p>Subscribing to Leadgen Event: </p>"},{"location":"onelead/meta/setup/#configure-meta-webhook-in-onelead","title":"Configure Meta Webhook in OneLead","text":"<p>Once the Meta App is set up, configure webhook settings in OneLead.</p>"},{"location":"onelead/meta/setup/#open-meta-webhook-config","title":"Open Meta Webhook Config","text":"<ul> <li>In Frappe, go to OneLead &gt; Settings &gt; Meta Webhook Config.</li> <li>Click New to create a new webhook configuration.</li> </ul>"},{"location":"onelead/meta/setup/#fill-in-required-fields","title":"Fill in Required Fields","text":"Field Description Meta URL <code>https://graph.facebook.com</code> Meta API Version <code>v20.0</code> (or latest version) Webhook Verify Token Use the same token as in Meta Webhook settings App ID Your Meta App ID App Secret Your Meta App Secret App Name Name of your registered Meta App Is Enabled Enable to activate integration Page Flow Enable for automatic page and lead fetching User Access Token Generated from Meta Graph API Explorer (can be added after webhook verification) <p>\ud83d\udccc Note: <code>Page Flow</code> must be enabled. In the future, this will be the only option available as <code>Campaign Flow</code> has been deprecated.</p>"},{"location":"onelead/meta/setup/#save-and-verify","title":"Save and Verify","text":"<ul> <li>Click Save.</li> <li>Click Verify Webhook to confirm the setup.</li> </ul>"},{"location":"onelead/meta/setup/#generate-add-user-access-token","title":"Generate &amp; Add User Access Token","text":"<p>Meta API requires a User Access Token with the necessary permissions.</p>"},{"location":"onelead/meta/setup/#open-the-graph-api-explorer","title":"Open the Graph API Explorer","text":"<ul> <li>Go to the Meta Graph API Explorer.</li> <li>Select your App.</li> </ul>"},{"location":"onelead/meta/setup/#grant-required-permissions","title":"Grant Required Permissions","text":"<pre><code>pages_show_list\nads_management\nads_read\nleads_retrieval\npages_read_engagement\npages_manage_metadata\npages_manage_ads\n</code></pre>"},{"location":"onelead/meta/setup/#generate-the-token","title":"Generate the Token","text":"<ul> <li>Click Generate Access Token.</li> <li>Copy the generated token.</li> <li>Paste it in Meta Webhook Config &gt; User Access Token in OneLead.</li> </ul>"},{"location":"onelead/meta/setup/#connect-facebook-in-onelead","title":"Connect Facebook in OneLead","text":"<p>Once the app is registered and webhook configured: - Go to Meta Webhook Config in OneLead. - Click Connect Facebook. - If successful, OneLead will fetch Ad Accounts and Pages.</p>"},{"location":"onelead/meta/setup/#next-steps","title":"Next Steps","text":"<ul> <li>Meta Form Mapping</li> <li>Meta Webhook Lead Logs</li> </ul>"},{"location":"onelead/meta/setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"onelead/meta/setup/#webhook-verification-fails","title":"Webhook Verification Fails","text":"<ul> <li>Check the Webhook URL and Verify Token in the Meta App settings.</li> <li>Ensure that your Frappe server is publicly accessible (if running locally, use ngrok to expose it).</li> </ul>"},{"location":"onelead/meta/setup/#unable-to-fetch-ad-accounts-and-pages","title":"Unable to Fetch Ad Accounts and Pages","text":"<ul> <li>Ensure correct API permissions are granted to the User Access Token.</li> </ul>"},{"location":"onelead/troubleshooting/meta_webhook_issues/","title":"Meta lead Issues","text":"<p>Raise an issue on GitHub:  OneLead Issues</p>"}]}